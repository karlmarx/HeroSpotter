<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/xhtml">
<head>
    <!--/*/ <th:block th:include="fragments/stylingFragment.html :: head">
            </th:block> /*/-->
    <link href="../css/style.css" rel="stylesheet" th:href="@{/css/style.css}"/>
    <style>
        #map {
            height: 100%;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
<div th:replace="fragments/stylingFragment.html:: navbar"></div>

<main role="main" class="container">

    <div class="container">
        <h1 class="display-2">Locations       <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#addLocation"><i class="fas fa-plus-square"></i> Add Location</button>
         </h1>


        <table id="location-table" class="table table-striped table-bordered" style="width:100%">
            <thead>
            <tr>
                <th>Name</th>
                <th>Address</th>
                <th>Details</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="location:${locations}">
                <td th:text="${location.name}">Name</td>
                <td th:text="${location.address}">Address</td>
                <td ><a href="#" th:onclick="'javascript:openLocationModal(\'' + ${location.id} + '\');'"><i class=" d-flex justify-content-center fas fa-info-circle"></i></a></td>
                <td ><a href="#" th:href="@{editLocation(id=${location.id})}"><i class="d-flex justify-content-center fas fa-edit"></i></a></td>

                <td ><a href="#" th:href="@{deleteLocation(id=${location.id})}"><i class="d-flex justify-content-center fas fa-minus-square"></i></a></td>
            </tr>

            </tbody>
            <tfoot>
            <tr>
                <th>Name</th>
                <th>Address</th>
                <th>Details</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
            </tfoot>
        </table>


    </div>



    <!-- Modal -->
    <div id="addLocation" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Add a Location</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form type="form" id="add-location-form" action="addLocation" method="POST">

                            <div class="form-row form-group">
                                <label class="col-md-3" for="name">Location Name</label>
                                <input type="text" class="col-md-9 form-control" id="name" name="name"/>
                            </div>

                            <div id="locationField" class=" form-row form-group">
                                <label class="col-md-3" for="autocomplete">Location Address</label>
                                <input id="autocomplete"
                                       name="address"

                                       class="col-md-9 form-control"
                                       placeholder="enter address and select from list"
                                       onFocus="geolocate()"
                                       type="text"/>
                            </div><br>


                            <div class="form-row">
                                <div class="form-group col-md-2">
                                    <label for="street_number">No.</label>
                                    <input class="field form-control" id="street_number" disabled="true" readonly/>
                                </div>
                                <div class="form-group col-md-10">
                                    <label for="route" >Street</label>
                                    <input class="field form-control" id="route" disabled="true" readonly/>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="locality">City</label>
                                    <input class="field form-control" type="text" id="locality" disabled="true" readonly/>
                                </div>
                                <div class="form-group col-md-4">
                                    <label for="administrative_area_level_1">State</label>
                                    <input class="field form-control" type="text" id="administrative_area_level_1" disabled="true" readonly/>
                                </div>
                                <div class="form-group col-md-2">
                                    <label for="postal_code">Zip</label>
                                    <input class="field form-control" type="text" id="postal_code" disabled="true" readonly/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="country">Country</label>
                                <input class="field form-control" type="text" id="country" disabled="true" readonly/>
                            </div>

                            <input type="hidden" id="placeID" name="placeID" />
                            <input type="hidden" id="latitude" name="latitude" />
                            <input type="hidden" id="longitude" name="longitude" />







                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" >Add Location</button>

                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
                </form>
            </div>

        </div>
    </div>


<!--    <div id="add form">-->
<!--        <h3>Add New Location</h3>-->

<!--        <form type="form" action="addLocation" method="POST">-->
<!--            <div class="col-8">-->
<!--            <div class="form-group">-->
<!--                <label class="col-4" for="name">Location Name</label>-->
<!--                <input type="text" class="col-8 form-control" id="name" name="name"/>-->
<!--            </div>-->

<!--            <div id="locationField" class="form-group">-->

<!--                <input id="autocomplete"-->
<!--                       name="address"-->
<!--                       class="col-md-12 form-control"-->
<!--                       placeholder="Enter the address"-->
<!--                       onFocus="geolocate()"-->
<!--                       type="text"/>-->
<!--            </div><br>-->


<!--            <div class="form-row">-->
<!--                <div class="form-group col-md-3">-->
<!--                    <label for="street_number">Street Address</label>-->
<!--                    <input class="field form-control" id="street_number" disabled="true" readonly/>-->
<!--                </div>-->
<!--                <div class="form-group col-md-9">-->
<!--                    <label for="route" style="color:transparent;">. </label>-->
<!--                <input class="field form-control" id="route" disabled="true" readonly/>-->
<!--                </div>-->
<!--            </div>-->

<!--            <div class="form-row">-->
<!--                <div class="form-group col-md-6">-->
<!--                    <label for="locality">City</label>-->
<!--                    <input class="field form-control" type="text" id="locality" disabled="true" readonly/>-->
<!--                </div>-->
<!--                <div class="form-group col-md-4">-->
<!--                    <label for="administrative_area_level_1">State</label>-->
<!--                    <input class="field form-control" type="text" id="administrative_area_level_1" disabled="true" readonly/>-->
<!--                </div>-->
<!--                <div class="form-group col-md-2">-->
<!--                    <label for="postal_code">Zip</label>-->
<!--                    <input class="field form-control" type="text" id="postal_code" disabled="true" readonly/>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="form-group">-->
<!--                <label for="country">Country</label>-->
<!--                <input class="field form-control" type="text" id="country" disabled="true" readonly/>-->
<!--            </div>-->

<!--            <input type="hidden" id="placeID" name="placeID" />-->
<!--            <input type="hidden" id="latitude" name="latitude" />-->
<!--            <input type="hidden" id="longitude" name="longitude" />-->ß
ß
<!--            <button type="submit" class="btn btn-primary">Add Location</button>-->
<!--            </div>-->
<!--        </form>-->

<!--    </div>-->

    </div>
</main>
<div id="map"></div>
<!-- Replace the value of the key parameter with your own API key. -->
<script th:inline="javascript">
    /*<![CDATA[*/
    var locations = [[${locations}]];
    /*]]>*/
    function initMap() {

        var myLatLng = {lat: 0, lng: 0};

        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 4,
            center: myLatLng
        });
        for  (var i = 0; i <locations.length; i++ ) {
            var l = new google.maps.LatLng(locations[i].latitude, locations[i].longitude);
            var marker = new google.maps.Marker({
                position: l,
                map: map,
                animation: google.maps.Animation.DROP,
                title: locations[i].name
            });

        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            title: 'Hello World!'
        });
    }

</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB66tFLS3_WbOT1Eln1Pi7LT6dN68L-xSc&callback=initMap">
</script>



<!--<div class="text-center">-->
<!--    <a href="" class="btn btn-default btn-rounded mb-4" data-toggle="modal" data-target="#add-modal">New Location</a>-->
<!--</div>-->
<!--<div class="modal fade" id="add-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"-->
<!--     aria-hidden="true">-->
<!--    <div class="modal-dialog" role="document">-->
<!--        <div class="modal-content">-->
<!--            <div class="modal-header text-center">-->
<!--                <h4 class="modal-title w-100 font-weight-bold">Sign in</h4>-->
<!--                <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                    <span aria-hidden="true">&times;</span>-->
<!--                </button>-->
<!--            </div>-->
<!--            <div class="modal-body mx-3">-->
<!--                <div class="md-form mb-5">-->
<!--                    <i class="fas fa-envelope prefix grey-text"></i>-->
<!--                    <input type="email" id="defaultForm-email" class="form-control validate">-->
<!--                    <label data-error="wrong" data-success="right" for="defaultForm-email">Your email</label>-->
<!--                </div>-->

<!--                <div class="md-form mb-4">-->
<!--                    <i class="fas fa-lock prefix grey-text"></i>-->
<!--                    <input type="password" id="defaultForm-pass" class="form-control validate">-->
<!--                    <label data-error="wrong" data-success="right" for="defaultForm-pass">Your password</label>-->
<!--                </div>-->

<!--            </div>-->
<!--            <div class="modal-footer d-flex justify-content-center">-->
<!--                <button class="btn btn-default">Login</button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->







<!-- /.container -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->


<!--<div th:replace="fragments/stylingFragment.html :: googleAuto"></div>-->
<!--&lt;!&ndash;<div th:replace="fragments/stylingFragment.html :: autocompleteScript"></div>&ndash;&gt;-->
<div th:replace="fragments/stylingFragment.html :: autocompleteScript"></div>
<div th:replace="fragments/stylingFragment.html :: includes"></div>

</body>
</html>