<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/xhtml">
<head>
    <!--/*/ <th:block th:include="fragments/stylingFragment.html :: head">
            </th:block> /*/-->
    <link href="../css/style.css" rel="stylesheet" th:href="@{/css/style.css}"/>
    <style>
        #map {
            height: 100%;
        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
<div th:replace="fragments/stylingFragment.html:: navbar"></div>

<main role="main" class="container">

    <div class="container">
        <h1 class="display-2">Sightings   <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#addSighting"><i class="fas fa-plus-square"></i> Add a Sighting</button>
        </h1>

        <table id="sightings-table" class="table table-striped table-bordered" style="width:100%">
            <thead>
            <tr>
                <th>Date</th>
                <th>Superperson</th>
                <th>Location</th>
                <th>Reporter</th>
                <th>Details</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="sighting:${sightings}">
                <td th:text="${sighting.date}">Date</td>
                <td th:text="${sighting.superPerson.name}">Superperson</td>
                <td th:text="${sighting.location.name + ': ' + sighting.location.address}">Address</td>
                <td th:text="${sighting.reporterName}">Reporter</td>
                <td><a href="#" th:onclick="'javascript:openSightingModal(\'' + ${sighting.id} + '\');'"><i class="d-flex justify-content-center fas fa-info-circle fa-2x"></i></a></td>
                <td><a href="#" th:href="@{editSighting(id=${sighting.id})}"><i class="d-flex justify-content-center fas fa-edit fa-2x"></i></a></td>
                <td><a href="#" th:href="@{deleteSighting(id=${sighting.id})}"><i class="d-flex justify-content-center fas fa-minus-square fa-2x"></i></a></td>
            </tr>

            </tbody>
            <tfoot>
            <tr>
                <th>Date</th>
                <th>Superperson</th>
                <th>Location</th>
                <th>Reporter</th>
                <th>Details</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
            </tfoot>
        </table>


    </div>



        <!-- Modal -->
        <div id="addSighting" class="modal fade" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">

                    <div class="modal-header">
                        <h3 class="modal-title">Report a Sighting</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="add form">

                            <form type="form" class="col-9" action="addSighting" method="POST">
                                <div class="form-group ">
                                    <label for="date" class="col-form-label">Date</label>
                                    <div class="">
                                        <input class="form-control" type="date" value="2019-10-26" id="date" name="date">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="super" class="col-form-label">Superperson</label>
                                    <select class="form-control" id="super" name="super">
                                        <option th:each="super : ${supers}"
                                                th:value="${super.id}"
                                                th:text="${super.name}" >Superperson</option>
                                    </select>
                                </div>
                                <button type="button" class="btn btn-primary btn-sm" onclick="closeAddSightingOpenAddSuper()"><i class="fas fa-plus-square"></i> Add New Super</button>
                                <div class="form-group">
                                    <label for="location" class="col-form-label">Location</label>
                                    <select class="form-control" id="location" name="location">
                                        <option th:each="location : ${locations}"
                                                th:value="${location.id}"
                                                th:text="${location.name + '(' + location.address + ')'}">Location</option>
                                        <option>Add New Location</option>
                                    </select>
                                </div>
                                <button type="button" class="btn btn-primary btn-sm" onclick="closeAddSightingOpenAddLocation()">
                                    <i class="fas fa-plus-square"></i> Add Location
                                </button>
                                <div class="form-group">
                                    <label for="reporterName" class="col-form-label">Your Name</label>
                                    <div class="">
                                        <input type="name" class="form-control" id="reporterName" name="reporterName"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="upload-image" class="col-form-label">Upload Image</label>
                                    <input type="file" class="form-control-file" id="upload-image">
                                </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn btn-primary">Add Sighting</button>
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                </div>

                            </form>
                        </div>



                    </div>

                </div>

            </div>
        </div>

</main>

    <div id="map"></div>
    <!-- Replace the value of the key parameter with your own API key. -->


<!--    <script th:inline="javascript">-->
<!--        /*<![CDATA[*/-->
<!--        var locations = [[${locations}]];-->
<!--        /*]]>*/-->
<!--        function initMap() {-->

<!--            var myLatLng = {lat: 0, lng: 0};-->

<!--            var map = new google.maps.Map(document.getElementById('map'), {-->
<!--                zoom: 4,-->
<!--                center: myLatLng-->
<!--            });-->
<!--            for  (var i = 0; i <locations.length; i++ ) {-->
<!--                var l = new google.maps.LatLng(locations[i].latitude, locations[i].longitude);-->
<!--                var marker = new google.maps.Marker({-->
<!--                    position: l,-->
<!--                    map: map,-->
<!--                    animation: google.maps.Animation.DROP,-->
<!--                    title: locations[i].name-->

<!--                });-->

<!--            }-->

<!--            var marker = new google.maps.Marker({-->
<!--                position: myLatLng,-->
<!--                map: map,-->
<!--                title: 'Hello World!'-->

<!--            });-->


<!--        }-->

<!--    </script>-->
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB66tFLS3_WbOT1Eln1Pi7LT6dN68L-xSc&callback=initMap">
    </script>


<!-- /.container -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

<div th:replace="fragments/stylingFragment.html :: autocompleteScript"></div>
<div th:replace="fragments/stylingFragment.html :: includes"></div>


</body>
</html>